import{d as m,b as d,g as f,e as p,f as v,h,i as w,j as y}from"./firebaseConfig-DPj6AoB7.js";import"./index.esm-CXXrB3IR.js";import"./site-navbar-fTlpGsp8.js";function E(){return new URLSearchParams(window.location.search).get("id")}document.addEventListener("DOMContentLoaded",async()=>{const o=document.getElementById("addEventForm"),e=document.getElementById("eventName"),t=document.getElementById("eventDescription"),r=document.getElementById("eventDate"),l=document.querySelector(".submit-btn"),i=E();let u=i!==null;if(u){l.textContent="Save Changes";const c=m(d,"tasks",i),n=await f(c);if(!n.exists()){s("Task not found!");return}const a=n.data();e.value=a.title,t.value=a.description||"",r.value=a.dueDate||""}o.addEventListener("submit",async c=>{c.preventDefault();const n={title:e.value.trim(),description:t.value.trim(),dueDate:r.value,ownerId:p.currentUser.uid};try{u?(await v(m(d,"tasks",i),n),s("Task updated successfully!")):(await h(w(d,"tasks"),{...n,isCompleted:!1,createdAt:y()}),s("Task created successfully!")),setTimeout(()=>{window.location.href="event.html"},1e3)}catch(a){console.error(a),s("Error saving task.")}})});function s(o){let e=document.getElementById("notificationContainer");e||(e=document.createElement("div"),e.id="notificationContainer",document.body.appendChild(e));const t=document.createElement("div");t.className="notification",t.textContent=o,e.appendChild(t),setTimeout(()=>{t.classList.add("show")},50),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>{t.remove()},300)},1700)}
