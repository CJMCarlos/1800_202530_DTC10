const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.esm-CXXrB3IR.js","assets/firebaseConfig-DPj6AoB7.js","assets/firebaseConfig-DmafGGRW.css"])))=>i.map(i=>d[i]);
import{o as C,i as S,b as v,q as b,m as x,w as E,n as _,e as $}from"./firebaseConfig-DPj6AoB7.js";import"./index.esm-CXXrB3IR.js";import"./site-navbar-CbIaobPa.js";const I="modulepreload",P=function(e){return"/"+e},w={},k=function(o,t,i){let n=Promise.resolve();if(t&&t.length>0){let m=function(a){return Promise.all(a.map(u=>Promise.resolve(u).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),s=r?.nonce||r?.getAttribute("nonce");n=m(t.map(a=>{if(a=P(a),a in w)return;w[a]=!0;const u=a.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${p}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":I,u||(c.as="script"),c.crossOrigin="",c.href=a,s&&c.setAttribute("nonce",s),document.head.appendChild(c),u)return new Promise((L,T)=>{c.addEventListener("load",L),c.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${a}`)))})}))}function l(r){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=r,window.dispatchEvent(s),!s.defaultPrevented)throw r}return n.then(r=>{for(const s of r||[])s.status==="rejected"&&l(s.reason);return o().catch(l)})},h=document.getElementById("completedList"),g=document.getElementById("emptyState");let f=null,d=!1;C($,e=>{if(!e){h.innerHTML=`
      <p>Please sign in to view completed tasks</p>
    `;return}const o=S(v,"tasks"),t=b(o,E("ownerId","==",e.uid),E("isCompleted","==",!0),x("completedAt","desc"));let i=!1;_(t,n=>{const l=()=>{if(n.empty){h.innerHTML="",g.hidden=!1;return}g.hidden=!0;const r=n.docs.map(s=>{const m=s.data();return`
            <div class="completed-item">
              <div>
                <h3 class="completed-title-text">${m.title}</h3>
                <p class="completed-date">${m.dueDate||""}</p>
                ${m.description?`<p class="completed-desc">${m.description}</p>`:""}
              </div>

              <div class="completed-actions">
                <button class="btn-text btn-restore" data-id="${s.id}">
                  Restore
                </button>
                <button class="btn-text btn-delete" data-id="${s.id}">
                  Delete
                </button>
              </div>
            </div>
          `}).join("");h.innerHTML=r,q()};d&&i?(f&&clearTimeout(f),f=setTimeout(()=>{l(),f=null},1500)):(l(),i=!0)})});function q(){document.querySelectorAll(".btn-restore").forEach(e=>{e.addEventListener("click",async()=>{const o=e.dataset.id,t=e.closest(".completed-item"),i=t.querySelector(".completed-title-text").textContent;try{d=!0,t.style.transform="translateX(-400px)",t.style.opacity="0",t.style.marginBottom="-80px",await A(o,{isCompleted:!1}),y(`"${i}" restored!`),setTimeout(()=>{d=!1},1500)}catch(n){console.error("Error restoring task:",n),y("Failed to restore task"),t.style.transform="translateX(0)",t.style.opacity="1",t.style.marginBottom="14px",d=!1}})}),document.querySelectorAll(".btn-delete").forEach(e=>{e.addEventListener("click",async()=>{const o=e.dataset.id,t=e.closest(".completed-item"),i=t.querySelector(".completed-title-text").textContent;try{d=!0,t.style.opacity="0",t.style.marginBottom="-80px",await B(o),y(`"${i}" deleted!`),setTimeout(()=>{d=!1},1500)}catch(n){console.error("Error deleting task:",n),y("Failed to delete task"),t.style.opacity="1",t.style.marginBottom="14px",d=!1}})})}async function A(e,o){const{doc:t,updateDoc:i}=await k(async()=>{const{doc:n,updateDoc:l}=await import("./index.esm-CXXrB3IR.js");return{doc:n,updateDoc:l}},__vite__mapDeps([0,1,2]));await i(t(v,"tasks",e),o)}async function B(e){const{doc:o,deleteDoc:t}=await k(async()=>{const{doc:i,deleteDoc:n}=await import("./index.esm-CXXrB3IR.js");return{doc:i,deleteDoc:n}},__vite__mapDeps([0,1,2]));await t(o(v,"tasks",e))}function y(e){let o=document.getElementById("notificationContainer");o||(o=document.createElement("div"),o.id="notificationContainer",document.body.appendChild(o));const t=document.createElement("div");t.className="notification",t.textContent=e,o.appendChild(t),setTimeout(()=>{t.classList.add("show")},50),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>{t.remove()},300)},1700)}
